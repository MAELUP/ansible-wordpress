---
- name: Download and unpack latest WordPress
  unarchive:
    src: https://wordpress.org/latest.tar.gz
    dest: "/var/www/"
    remote_src: yes
    creates: "/var/www/wordpress"
- name: change file name [copy new file]
    copy:
        remote_src: true
        src: /var/www/html/wordpress/wp-config-sample.php
        dest: /var/www/html/wordpress/wp-config.php

- name: edit file
  lineinfile:
    path: /var/www/html/wordpress/wp-config.php
    regexp: "{{item.regexp}}"
    line: "{{item.line}}"
    loop:
     - { regexp: ^define\('DB_NAME', line: "define('DB_NAME', 'wordpress');" }
     - { regexp: ^define\('DB_USER', line: "define('DB_USER' , 'ansible');" }
     - { regexp: ^define\('DB_PASSWORD', line: "define('DB_PASSWORD' , 'mypassword');" }
